# 📚 개발 도서 스터디 템플릿

## 🧠 1. 책을 읽기 전에
- **기대하는 점**: 이 책을 선택한 이유, 기대하고 있는 내용
- **알고 싶은 개념 / 주제**: 미리 궁금했던 개념이나 기술

---

## 📂 2. 내용 정리 (자신의 언어로 요약)

### OS 계정 권한 
- OS 를 설치하면 기본적으로 Root 권한을 가지게 된다.
- 권한 관련해서 그룹 설정도 가능

|파일 권한|소유자|소유 그룹|파일크기|말지막 수정 시간|파일명|
|-----|-----|-----|-----|-----|-----|  
| -rw-r--r--. 1 | vagrant | vagrant | 7 | 11월 10 08:24 | README.md |

|소유자|소유 그룹|다른 계정|
|-----|-----|-----|
|rwx|r--|r--|
|읽기 쓰기 실행 권한|읽기 권한|읽기 권한|

|읽기|쓰기|실행|
|-----|-----|-----|
|4|2|1|

**chmod가 가지고 있는 권한 숫자는 이 읽기 쓰기 실행에 권한의 숫자 합을 의미한다.** <br>
chmod 754 : 소유자는 모든 권한, 소유 그룹은 일긱쓰기만, 다른 계정은 읽기만 가능하다.

### 파일 디스크립터 제한
- 데이터 입출력이 필요할 때, 파일 디스크립터를 할당받는다.
- OS는 생성할 수 있는 파일 디스크립터 개수를 제한한다. (프로세스는 이걸 초과해서 생성할 수 없다.)
- 트래픽 증가에 맞춰서 파일 디스크립터 개수 제한을 확인하고 늘릴 수 있음
- nofile : 파일 디스크립터 개수를 의미, soft hard는 기본값, 최대값을 의미
- systemctl show -p DefaultLimitNOFILE : systemd로 실행되는 서비스의 디스크립터 제한. ulimit이나 limit.conf파일 설정값이 아님
- systemctl daemon-reload로 설정 반영
- 한 프로세스가 가지는 파일 디스크립터 개수도 확인해야함. 

### 시스템 시간 조정
- chrny, ntp로 주기적으로 서버 시간을ㅇ 맞춰줄 수 있음. 서버 구성 체크리스트를 만들어서 시간 동기화를 맞출 수도 있음

### 크론 스케줄링
- 크론 탭 정의 스케줄에 맞춰 작업을 실행한다.

### alias 등록
- 명령어 약어 등록
- 쉘 구성파일에 alias를 등록하면 된다.
- .bash_profile, .bashrc에 미리 정의해서 파일로 등록해둘 수도 있음

### 네트워크 정보 확인
- ipconfig, curl , wget, netstat
- 간혹 포트 충돌 가능성이 있음. 클라이언트 소켓과 같은 포트를 사용하면서 충돌날 수 있음 (클라이언트 소켓의 사용할 프토 범위를 제한하도록 하기)

### OS 명령어 정리
|명령어|설명|
|-----|-----|
|chmod 754 run.sh|해당 계정에 대한 읽기 실행 과정 설명|
|chmod u+x run.sh| + : 사용자에게 실행 권한 추가의 의미 (- 일 경우 권한 제거, = 일 경우 지정의 의미)| 
|root ALL=(ALL) ALL| root계정은 모든 호스트에대해(로그인한 서버) 모든 사용자로 실행할 수 있다. 모든 명령어로 실행할 수 있다|
|ps aux, ps -eaf| 프로세스 ID 확인|
|ps aux --sort -rss : head -n 6| 프로세스 점유하는 메모리 사용량이 높은 프로세스 상위 5개를 확인|
|kill 옵션 PID| -15는 프로세스에 TERM신호를 보내서 종료에 필요한 작업을 수행한다. 임시생성파일을 삭제하거나 스프링 빈의 제거 처리를 수행한다. -9는 강제 종료|
|tail -f access.log| 포그라운드 프로세스로 로그 확인|
|nohup java -Dserver.port=9090 -jar server.jar &| 백그라운드로 터미널을 종료해도 프로세스가 계속 실행되게 할 수 있음) no hang up을 명령한다. 터미널 연결이 끊길 떄 전송되는 HUP 시그널이 프로세스에 전달되지 않게 한다.|
|df -h| 디스크 파티션의 사용률이 어디가 높은지 확인. 용량을 mb나 GB 단위로 표현해줌|
|du -sh ./* | 어느 디렉토리가 많은 용량을 차지하는 지 확인. disk usage의 약자|
|find ./logs -mtime +29 -type f -delete| 로그 디렉토리에서 30일 이전 파일을 삭제. 이후 -exec를 추가해서 파일 압축, 이동을 할 수 있음|
|cp /dev/null out.log| 널에 등록되는 데이터는 모두 버려지기 때문에 데이터를 이곳으로 옮겨서 삭제 처리해버릴 수 있음. 용량문제를 급히 해결할 때 사용한다.|
|ulimit -a|파일 디스크립터 개수 확인|
|systemctl show -p DefaultLimitNOFILE|systemd로 실행되는 서비스의 디스크립터 제한|
|systemctl daemon-reload|위의 설정을 반영|
|sysctl fs.nr_open|한 프로세스의 파일 디스크립터 개수 확인|
|sysctl -p|위의 명렁어 적용|
|lsof -p 프로세스ID: ws -l| 프로세스 사용중인 파일 디스크립터 개수 확인|
|alias cdweb='cd /var/web/html'| cdweb : 별칭 '' : 행동|
|ipconfig|서버의 IP 주소|
|nc -z -v www.naver.com 443| 443포트로 연결이 가능한 지 확인하는 명령여 -z는 데이터 전송 없이 포트만 열려잇는지 확인. -v는 추가 정보를 출력|
|netstat -lupdn| 리스닝 서버 포트, 소켓 pid 이름 확인, UDP 소켓, TCP 소켓, 포트나 주소를 숫자로 출력|

---

## 💬 3. 이야기하고 싶은 질문 / 포인트

1. rm -rf : 지우면 복구가 가능?
  - 가능. #debugfs /dev/hda8 hda8 파티션에 대해서 검사를 한다.
  - 대기상태를 뜻함. 이곳에서 lsdel 을 입력 복구할 데이터를 찾아서 복구를 시도한다. => 맥에서는 되는지 테스트해봤는데 안됨..
  - 맥에서는 다른 방법이 다른 프로그램을 설치해서 사용하는 것 같은데, 모두 디스크를 다시 검사해서 그안에서 찾아서 복구하는 것 처럼 보임
3. 프로세스 TERM 으로 스프링 빈 제거?
- JVM Shutdown Hook, ApplicationContext 생명주기 관리
  Springboot는 자동적으로 JVM의 shutdown hook을 등록한다.
  그리고 Application Context를 graceful하게 종료하는 역할을 한다.
- SIG TERM 신호(Signal 15)가 전송되면, JVM 수신, shutdown hook실행, applicationContext 종료. 빈 순차적인 종료
- @PreDestroy, DisposeableBean.destroy(), 커스텀 Destory순서로 종료된다.
- 만약, 특정 빈만 제거하고 싶다면 OS 시그널을 직접 핸들링해서 특정 빈만 제거할 수 있도록 유도할 수 도 있음

4. 회사가 시도중인 방식 -> 극구 반대중
- IPC (Inter-Process-Communitcation)
- 한 서버에 여러개의 JVM을 둔다. JVM에서 생성되는 메세지를 큐로 보낸다.
- IPC를 통해 '커널에서' 이 다른 프로세스의 메세지를 읽어서 처리할 수 있도록 한다.
- 커널 의존성이 높아지지만, 동기화문제는 발생하지 않는다.
- Redis처럼 서버 셧다운으로 데이터 유실 가능성 있음..차라리 카프카를 쓰지 왜 이러면서 싸우는 중 <img width="480" height="592" alt="스크린샷 2025-07-15 오후 1 58 55" src="https://github.com/user-attachments/assets/5c098966-0ee0-4747-988d-9614f76af3ef" />

---

## 🎯 4. 정리 & 적용 아이디어

- **내가 배운 것 한 줄 요약**:  
  → `이 장을 통해 나는 ____을 이해했다.`
- **개발에 어떻게 적용해볼까?**
    - 실제 프로젝트나 업무에 적용해볼 수 있는 아이디어

---

## 🌟 5. 전체 리뷰

- **별점 평가** (⭐️ 5점 만점): `⭐️⭐️⭐️⭐️`
- **책에 대한 총평**:
- **이 책을 추천한다면 어떤 사람에게?**
