# 📚 개발 도서 스터디 템플릿

## 🧠 1. 책을 읽기 전에
- 네트워크 레벨에서 모르는 것들이 많아서 이번 기회에 회사에서 겪는 문제들을 많이 경험해보고 싶슴니다
---

## 📂 2. 내용 정리 (자신의 언어로 요약)

### 노드,네트워크,라우터
- 노드 : 데이터를 송수신하는 장치 (휴대폰, 노트북 서버 장비 등)
- 네트워크 : 서로 데이터를 주고 받기 위해 연결된 시스템
- 패킷 : 네트워크로 전송하는 데이터의 단위. (헤더와 페이로드로 구분된다.)

### IP 주소와 도메인
- 일반 최상위 도메인 : .kr, au, .com, org, net, gov, app, biz, tect 등
- 2차 도메인 : naver.com, google.com 등등
- 3차 도메인 : cafe.naver.com 등등
- hosts 파일 : 호스트 이름과 ip주소에 대한 매핑을 정의한 내용
- 고정 ip, 변동 ip : 서버 주소 같은 것들, 동적 ip는 DHCP(Dynamic Host Configuration Protocol) 서버를 통해 제공받는다.

### NAT
- 네트워크 주소를 변환하는 기술 (사설 IP와 공인 IP 주소간 변환이 필요)
- 인터넷 연결된 네트워크 장비가 담당 공인 IP는 라우터 방화벽에 할당한다.

### VPN
- 사설 IP에 직접 접근할 수 없기 때문에 NAT를 사용해서 공인 IP를 통해서 접근은 가능
- 안전하게 접근하려면 VPN으로 인터넷과 같은 공용 네트워크에서 서로 다른 네트워크간 암호화 연결을 제공한다.

---

## 💬 3. 이야기하고 싶은 질문 / 포인트

## [한국에서 olympics.com 사이트를 탐색하면 일어나는 일]

### ✅ OSI 7계층 관점에서의 웹사이트 접근 흐름

| 계층 | 설명 | 웹사이트 접근에서 수행되는 역할 |
|------|------|-------------------------|
| **7. 응용 계층 (Application)** | 사용자와 가장 가까운 계층 | 브라우저가 `https://olympics.com` 요청을 생성 |
| **6. 표현 계층 (Presentation)** | 데이터 포맷 변환, 암호화/복호화 | SSL/TLS 핸드셰이크를 통한 데이터 암호화 수행 |
| **5. 세션 계층 (Session)** | 세션 관리 | 클라이언트와 서버 간의 통신 세션 유지 |
| **4. 전송 계층 (Transport)** | TCP/UDP, 포트 관리 | TCP 3-way handshake로 연결 수립 (포트 443) |
| **3. 네트워크 계층 (Network)** | IP 주소 기반 라우팅 | 클라이언트 IP → 서버 IP까지 패킷 전달 |
| **2. 데이터 링크 계층 (Data Link)** | MAC 주소, 프레임 처리 | 이더넷 프레임으로 네트워크 카드 간 데이터 전달 |
| **1. 물리 계층 (Physical)** | 실제 전기/광 신호 | 유선/무선 전송, 광케이블을 통한 국제망 전송 |

### ✅ DNS 탐색 과정 (한국에서 외국 사이트 도메인 요청)

1. 사용자가 브라우저에 `olympics.com` 입력  
2. **로컬 DNS 캐시** 확인 → 없다면  
3. **ISP(예: KT, SK)의 지역 DNS 서버**에 질의  
4. 지역 DNS 서버에 캐시 없음 → **Root DNS 서버**로 위임 요청  
5. Root 서버 → `.com` TLD DNS 알려줌  
6. TLD DNS → `olympics.com`에 대한 **권한 있는 NS (Name Server)** 알려줌  
7. 권한 DNS 서버에서 `olympics.com` → **실제 IP 주소** 응답  
8. 이 IP 주소를 기반으로 TCP/IP 연결 시도

### 문제 1: Window Size 문제로 인한 전송 지연

- **Identified Cause:**  
  TCP Window Size가 너무 작게 설정되어 있어서, 수신 측의 처리 속도보다 송신 측의 전송 속도가 빠를 경우 **지속적인 ACK 대기 상태**로 전송이 지연됨.
- **Supporting Evidence:**  
  - `Wireshark`에서 패킷을 확인 시 `Window Full`, `Zero Window`, `TCP Window Update`가 자주 발생  
  - RTT는 낮지만 전체 전송 시간(TTFB 등)은 비정상적으로 길게 측정됨  
  - 클라이언트 또는 서버 측 OS의 TCP 버퍼 설정이 비정상적으로 작음
- **Technical Reasoning:**  
  TCP는 흐름 제어를 위해 수신자가 처리할 수 있는 데이터 양(Window Size)을 알려줌. 이 값이 작거나 계속 0으로 유지되면 송신자는 데이터를 멈추고 ACK를 기다리게 되어 대역폭이 비효율적으로 사용됨.
---

### 문제 2: 3-Way Handshake 이후 연결 실패

- **Identified Cause:**  
  TCP Handshake는 완료되었지만, 그 이후 데이터 전송 시도 시 **RST 패킷(TCP 연결을 강제로 끊는 신호)**이 오거나 **방화벽, NAT, IDS/IPS**에서 연결이 차단됨.
- **Supporting Evidence:**  
  - `SYN` → `SYN-ACK` → `ACK` 까지 완료됨  
  - 이후 `RST` 패킷 수신 또는 연결 종료 발생  
  - 서버 쪽에서는 connection table이 유지되지 않거나, L4 스위치나 방화벽에서 일정 시간 후 connection drop  
  - 혹은 Geo-block, DPI(Deep Packet Inspection) 기반 차단
- **Technical Reasoning:**  
  TCP 연결은 성립되었으나, 애플리케이션 계층(HTTP 등)으로 연결이 전달되지 않음. 보안 장비 또는 커널 파라미터(tcp_tw_reuse 등)가 연결을 강제로 종료하거나, 서버의 포트가 실제로 열려 있지 않은 상태일 수 있음.
- **L4 방화벽을 통과하더라도 L7에서 실패할 수 있음**
  - 예시 상황:
	1. TCP는 연결됨 (443 포트 열림)
	2. 클라이언트가 HTTP 요청 보냄 (ex: GET /index.html)
	3. WAF에서 User-Agent, URI, Country IP, TLS 정보 등을 검사
	4. 조건 불일치 시 → 서버는 TCP RST 패킷으로 연결 강제 종료

### 루트 네임 서버
- 가장 가까운 위치에 있는 루트 DNS 서버를 먼저 찾아간다.
-  보통 ISP (KT) 또는 회사 DNS에서 자주 쓰는 도메인 정보를 이미 캐싱해두고 있음
1. 서버 수는 제한적이지 않다
	•	“13개”는 네트워크 구조상 논리적 설계일 뿐, 물리적으로는 2024년 기준 600개가 넘는 루트 서버 인스턴스가 전 세계에 배치되어 있습니다.
	•	단일 서버에 부하가 집중되지 않도록 Anycast 방식으로 분산 부하 처리가 가능합니다.
2. 처리하는 역할과 부하
	•	루트 DNS 서버의 주 역할은 TLD 네임서버(.com, .kr 등) 위치만 안내하는 것이므로, 실제 개별 웹사이트 정보(예: www.naver.com)는 알려주지 않습니다.
	•	요청마다 처리하는 저장·계산량이 작으며, 매우 단순한 질의-응답(리퍼럴) 처리를 반복합니다.
3. 분산 아키텍처의 강점
	•	대규모 공격(DDoS)이나 트래픽 폭증에도 강한 내성을 가지도록 설계되어 있습니다.
	•	한 지역 인스턴스에 장애가 생겨도, 자동으로 인접한 다른 인스턴스가 역할을 이어받아 네트워크가 중단되지 않습니다.

### MAC(Media Access Control) 주소는 변경된다.
- **네트워크 인터페이스 카드(NIC)**에 할당된 고유 식별자
- OSI 2Layer 에서 사용된다.
- 운영체제 차원에서 소프트웨어적으로 변경 가능( Mac Spoofing)
- 리눅스 : sudo ifconfig eth0 hw ether 00:11:22:33:44:55

---
